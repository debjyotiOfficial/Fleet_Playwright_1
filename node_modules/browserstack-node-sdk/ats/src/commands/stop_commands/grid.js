function a21_0x2404(_0x543322,_0x3d9b68){const _0x137aee=a21_0x137a();return a21_0x2404=function(_0x240402,_0x58a599){_0x240402=_0x240402-0x130;let _0x5379fd=_0x137aee[_0x240402];return _0x5379fd;},a21_0x2404(_0x543322,_0x3d9b68);}const a21_0x1ee0f1=a21_0x2404;(function(_0x27ccf3,_0x16de1d){const _0x1421cc=a21_0x2404,_0x59b670=_0x27ccf3();while(!![]){try{const _0x92af93=parseInt(_0x1421cc(0x18b))/0x1+parseInt(_0x1421cc(0x150))/0x2*(parseInt(_0x1421cc(0x15d))/0x3)+parseInt(_0x1421cc(0x16b))/0x4*(parseInt(_0x1421cc(0x166))/0x5)+parseInt(_0x1421cc(0x180))/0x6+parseInt(_0x1421cc(0x160))/0x7+parseInt(_0x1421cc(0x132))/0x8+-parseInt(_0x1421cc(0x145))/0x9;if(_0x92af93===_0x16de1d)break;else _0x59b670['push'](_0x59b670['shift']());}catch(_0x2c71c7){_0x59b670['push'](_0x59b670['shift']());}}}(a21_0x137a,0xf1a49));function a21_0x137a(){const _0x3438a1=['YzOEn','bstackAccesskey','mTkeZ','debug','OFdqS','9696492bVKnwK','XIBjT','Grid\x20stoppped.','HKQFy','gridId','body','boolean','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','type','cloudProvider','<PasswordPlaceholder>','839189lobnFw','parse','mSwmj','name','9523056MJGoQc','SIrjG','../../utils/createk8sClient','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','kLTAf','RbQoO','WgwpC','../../utils/webSocketUtils','argv','handler','Browserstack','existsSync','description','stop-grid-called','stop','../../config/constants','password','builder','../../utils/gridComponents','69999678szlmRY','stack','uqICg','statusCode','WebSocket','clusterRegion','invalid-grid-id','Skip\x20insecure\x20cert\x20verification.','GOQff','BtZgz','gjMPM','50RqUVtN','../../config/logger','RtPfn','usage','replace','<UsernamePlaceholder>','string','addListeners','Adding\x20Websocket\x20listeners','info','../../cloudproviders/utils','jsLvG','readFileSync','215157NyiPwN','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','rkoAR','12029283WrDZhq','nIzPf','../../utils/utilityMethods','OOmxt','reconnecting-websocket','INFO','350090ytNQjB','GwitQ','init-not-called','Stop\x20a\x20running\x20Automation\x20grid.','default','92GsdMnL','ERROR','user','kSkrw','help','desc','skipTlsCertVerify','region','options','iWZQN','clusterName','exit','RXtJd','error','server-error','grid'];a21_0x137a=function(){return _0x3438a1;};return a21_0x137a();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x1ee0f1(0x164)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x1ee0f1(0x141)),{logger}=require(a21_0x1ee0f1(0x151)),{getCredentialsPath,getGridDetails}=require(a21_0x1ee0f1(0x162)),{scaleDownHubDeployment}=require(a21_0x1ee0f1(0x144)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a21_0x1ee0f1(0x139)),{createK8sClient}=require(a21_0x1ee0f1(0x134)),{getCloudProviderObject}=require(a21_0x1ee0f1(0x15a));exports['command']=a21_0x1ee0f1(0x17a),exports[a21_0x1ee0f1(0x170)]=a21_0x1ee0f1(0x169),exports[a21_0x1ee0f1(0x143)]=function(_0x13e60c){const _0x512d90=a21_0x1ee0f1,_0x42a8ff={};_0x42a8ff['SIrjG']=_0x512d90(0x187),_0x42a8ff[_0x512d90(0x174)]=_0x512d90(0x156),_0x42a8ff[_0x512d90(0x14d)]=_0x512d90(0x14c),_0x42a8ff[_0x512d90(0x14f)]=_0x512d90(0x186),_0x42a8ff['TNPgM']=_0x512d90(0x16f);const _0x2c7e13=_0x42a8ff,_0x473601={};_0x473601[_0x512d90(0x13e)]=_0x2c7e13[_0x512d90(0x133)],_0x473601[_0x512d90(0x188)]=_0x2c7e13[_0x512d90(0x174)];const _0x676d2f={};_0x676d2f['description']=_0x2c7e13[_0x512d90(0x14d)],_0x676d2f[_0x512d90(0x188)]=_0x2c7e13[_0x512d90(0x14f)],_0x676d2f[_0x512d90(0x16a)]=![];const _0x15edce={};return _0x15edce['grid-id']=_0x473601,_0x15edce['skip-tls-cert-verify']=_0x676d2f,_0x13e60c[_0x512d90(0x153)](HELP_HEADER_MESSAGE[_0x512d90(0x140)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x512d90(0x173)](_0x15edce)[_0x512d90(0x16f)](_0x2c7e13['TNPgM'])[_0x512d90(0x13a)];},exports[a21_0x1ee0f1(0x13b)]=async function(_0x5741c1){const _0x3d889a=a21_0x1ee0f1,_0x3bcc49={'rkoAR':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','HKQFy':function(_0x8010e9){return _0x8010e9();},'RtPfn':_0x3d889a(0x135),'YzOEn':function(_0x2bcdb1,_0x118cf4,_0x1544b3,_0x70ba58,_0x5a6f2a,_0x4b7c9f,_0xccfd9f){return _0x2bcdb1(_0x118cf4,_0x1544b3,_0x70ba58,_0x5a6f2a,_0x4b7c9f,_0xccfd9f);},'jsLvG':_0x3d889a(0x13f),'sOEbT':_0x3d889a(0x168),'kSkrw':function(_0x523e0c,_0x3a2c93,_0x199dff,_0x1407f0,_0x3eff9e,_0x4a61cd,_0x2a0f6c){return _0x523e0c(_0x3a2c93,_0x199dff,_0x1407f0,_0x3eff9e,_0x4a61cd,_0x2a0f6c);},'OOmxt':function(_0x303415){return _0x303415();},'XIBjT':_0x3d889a(0x155),'nIzPf':_0x3d889a(0x18a),'WgwpC':_0x3d889a(0x158),'nyNlS':function(_0x4e4533,_0x4e9390,_0x35b94f,_0x41dd4b){return _0x4e4533(_0x4e9390,_0x35b94f,_0x41dd4b);},'OFdqS':function(_0x3a7274,_0x270446,_0x47e3f5){return _0x3a7274(_0x270446,_0x47e3f5);},'BtZgz':function(_0x2eed17,_0x4f5e8b,_0x34e334){return _0x2eed17(_0x4f5e8b,_0x34e334);},'QroHe':_0x3d889a(0x182),'mTkeZ':function(_0x2a3e05,_0x59fce0){return _0x2a3e05===_0x59fce0;},'kLTAf':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','RXtJd':function(_0x339edd,_0x25fb7e,_0x46427f,_0x4c22a7,_0x241d08,_0x53d35f,_0x4af7d2){return _0x339edd(_0x25fb7e,_0x46427f,_0x4c22a7,_0x241d08,_0x53d35f,_0x4af7d2);},'RbQoO':'unauthorised','mSwmj':function(_0x2a61a7,_0x85b92b){return _0x2a61a7===_0x85b92b;},'rCjdh':_0x3d889a(0x14b),'GwitQ':function(_0x7f2187,_0x3d68be,_0x1a0a18,_0x211c83,_0x1528bc,_0x2b7db2,_0x146c12){return _0x7f2187(_0x3d68be,_0x1a0a18,_0x211c83,_0x1528bc,_0x2b7db2,_0x146c12);},'uqICg':_0x3d889a(0x179)};let _0x213b20;try{!_0x5741c1[_0x3d889a(0x184)]&&(logger[_0x3d889a(0x178)](_0x3bcc49[_0x3d889a(0x15f)]),process[_0x3d889a(0x176)](0x1));!fs[_0x3d889a(0x13d)](_0x3bcc49[_0x3d889a(0x183)](getCredentialsPath))&&(logger[_0x3d889a(0x178)](_0x3bcc49[_0x3d889a(0x152)]),await _0x3bcc49[_0x3d889a(0x17b)](sendInstrumentationEvent,_0x5741c1,_0x3bcc49[_0x3d889a(0x15b)],messageTypes[_0x3d889a(0x16c)],_0x3bcc49['sOEbT'],null,_0x5741c1),process[_0x3d889a(0x176)](0x1));logger[_0x3d889a(0x159)]('Stopping\x20grid\x20'+_0x5741c1[_0x3d889a(0x184)]),await _0x3bcc49[_0x3d889a(0x16e)](sendInstrumentationEvent,_0x5741c1,_0x3bcc49[_0x3d889a(0x15b)],messageTypes[_0x3d889a(0x165)],null,null,_0x5741c1);const _0x3111c6=JSON[_0x3d889a(0x18c)](fs[_0x3d889a(0x15c)](_0x3bcc49[_0x3d889a(0x163)](getCredentialsPath)));global_registry['bstackUsername']=_0x3111c6[_0x3d889a(0x13c)]['username'],global_registry[_0x3d889a(0x17c)]=_0x3111c6[_0x3d889a(0x13c)][_0x3d889a(0x142)];const _0x44084f=WS_ENDPOINT[_0x3d889a(0x154)](_0x3bcc49[_0x3d889a(0x181)],_0x3111c6[_0x3d889a(0x13c)]['username'])[_0x3d889a(0x154)](_0x3bcc49[_0x3d889a(0x161)],_0x3111c6[_0x3d889a(0x13c)][_0x3d889a(0x142)]),_0x398af0={};_0x398af0[_0x3d889a(0x149)]=ws,_0x398af0['connectionTimeout']=0x36ee80,_0x213b20=new ReconnectingWebSocket(_0x44084f,[],_0x398af0),logger[_0x3d889a(0x17e)](_0x3bcc49[_0x3d889a(0x138)]),webSocketUtils[_0x3d889a(0x157)](_0x213b20,_0x5741c1[_0x3d889a(0x16d)],_0x5741c1[_0x3d889a(0x142)]);const [_0xaa540d,_0xf27f6d]=await _0x3bcc49['nyNlS'](getGridDetails,_0x3111c6['Browserstack']['username'],_0x3111c6['Browserstack']['password'],_0x5741c1[_0x3d889a(0x184)]);if(_0xf27f6d){const _0x43efea=_0xf27f6d[_0x3d889a(0x159)];global_registry['cloudProvider']=_0x43efea[_0x3d889a(0x189)],global_registry[_0x3d889a(0x14a)]=_0x43efea[_0x3d889a(0x172)],global_registry[_0x3d889a(0x175)]=_0x43efea[_0x3d889a(0x175)];const _0xa5e667=await _0x3bcc49[_0x3d889a(0x16e)](getCloudProviderObject,_0x43efea[_0x3d889a(0x189)],_0x43efea['clusterName'],_0x43efea['name'],_0x213b20,webSocketUtils,_0x5741c1),[_0x464e26,_0x3f529c,_0x2cc383,_0x316583,_0x5b28ee,_0x4b5af7]=await _0x3bcc49[_0x3d889a(0x17f)](createK8sClient,_0xa5e667,_0x5741c1[_0x3d889a(0x171)]);await _0x3bcc49[_0x3d889a(0x14e)](scaleDownHubDeployment,_0x3f529c,_0x43efea[_0x3d889a(0x131)]),logger[_0x3d889a(0x159)](_0x3bcc49['QroHe']),process[_0x3d889a(0x176)](0x0);}_0x3bcc49[_0x3d889a(0x17d)](_0xaa540d[_0x3d889a(0x148)],0x191)&&(logger[_0x3d889a(0x178)](_0x3bcc49[_0x3d889a(0x136)]),await _0x3bcc49[_0x3d889a(0x177)](sendInstrumentationEvent,_0x5741c1,_0x3bcc49['jsLvG'],messageTypes[_0x3d889a(0x16c)],_0x3bcc49[_0x3d889a(0x137)],null,_0x5741c1),process[_0x3d889a(0x176)](0x1)),_0x3bcc49[_0x3d889a(0x130)](_0xaa540d[_0x3d889a(0x148)],0x190)&&(logger[_0x3d889a(0x178)](JSON[_0x3d889a(0x18c)](_0xaa540d[_0x3d889a(0x185)])['message']),await _0x3bcc49['RXtJd'](sendInstrumentationEvent,_0x5741c1,_0x3bcc49['jsLvG'],messageTypes['ERROR'],_0x3bcc49['rCjdh'],null,_0x5741c1),process[_0x3d889a(0x176)](0x1)),logger[_0x3d889a(0x178)](_0x3d889a(0x15e)+JSON['stringify'](_0xaa540d)),await _0x3bcc49[_0x3d889a(0x167)](sendInstrumentationEvent,_0x5741c1,_0x3bcc49[_0x3d889a(0x15b)],messageTypes['ERROR'],_0x3bcc49[_0x3d889a(0x147)],_0xaa540d,_0x5741c1),process[_0x3d889a(0x176)](0x1);}catch(_0x5d9541){const _0x51b89e='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x5d9541+'\x20\x0a'+JSON['stringify'](_0x5d9541[_0x3d889a(0x146)])+'\x20';logger[_0x3d889a(0x178)](_0x51b89e),process[_0x3d889a(0x176)](0x1);}};