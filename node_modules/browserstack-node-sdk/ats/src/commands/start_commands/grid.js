const a19_0x3eeac2=a19_0x1ac0;(function(_0x4e1245,_0x5e3504){const _0xeafd9b=a19_0x1ac0,_0x859daf=_0x4e1245();while(!![]){try{const _0x2eb75b=-parseInt(_0xeafd9b(0x11c))/0x1+-parseInt(_0xeafd9b(0x129))/0x2+parseInt(_0xeafd9b(0x159))/0x3+parseInt(_0xeafd9b(0x120))/0x4+parseInt(_0xeafd9b(0x178))/0x5+-parseInt(_0xeafd9b(0x130))/0x6+parseInt(_0xeafd9b(0x14d))/0x7;if(_0x2eb75b===_0x5e3504)break;else _0x859daf['push'](_0x859daf['shift']());}catch(_0x348439){_0x859daf['push'](_0x859daf['shift']());}}}(a19_0x42cd,0x6f792));function a19_0x42cd(){const _0x4c86f3=['djewS','../../utils/gridComponents','5594778zXXFxa','connectionTimeout','IXPrU','epilogue','grid-id','iEgaV','description','name','body','CQrfu','Start\x20an\x20existing\x20Automation\x20grid.','<UsernamePlaceholder>','609810guyMzK','WebSocket','KzYkq','cloudProvider','UtLae','OoJqx','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','username','reconnecting-websocket','KmpAp','start','error','../../config/constants','SUqIf','default','lIESS','IWBbh','gridId','password','readFileSync','WTQSY','zPpOy','ujbwL','start-grid-called','skipTlsCertVerify','message','sZcRr','zBIZg','aOnba','PFwGu','OReFg','1316445RgiAZc','stringify','219358HMstno','help','server-error','TiHBa','1870476oqFvUO','ldeLZ','LxFar','boolean','<PasswordPlaceholder>','type','string','RHcvr','FElfe','1065622bHzmiw','fZjzR','exit','skip-tls-cert-verify','../../utils/createk8sClient','../../config/logger','HYqbI','3148014yXDXkw','Starting\x20grid\x20','Skip\x20insecure\x20cert\x20verification.','IbDUl','statusCode','Adding\x20Websocket\x20listeners','info','INFO','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','handler','Grid\x20started','clusterRegion','ERROR','rCqCQ','clusterName','Browserstack','argv','region','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','usage','options','debug','MdYQS','replace','../../utils/webSocketUtils','../../utils/instrumentationUtils'];a19_0x42cd=function(){return _0x4c86f3;};return a19_0x42cd();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x3eeac2(0x161)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x3eeac2(0x165)),{logger}=require(a19_0x3eeac2(0x12e)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a19_0x3eeac2(0x14c)),{sendInstrumentationEvent}=require(a19_0x3eeac2(0x14a)),webSocketUtils=require(a19_0x3eeac2(0x149)),{createK8sClient}=require(a19_0x3eeac2(0x12d)),{getCloudProviderObject}=require('../../cloudproviders/utils');function a19_0x1ac0(_0x3f7dcb,_0x16eb81){const _0x42cdab=a19_0x42cd();return a19_0x1ac0=function(_0x1ac073,_0x200123){_0x1ac073=_0x1ac073-0x11c;let _0x389753=_0x42cdab[_0x1ac073];return _0x389753;},a19_0x1ac0(_0x3f7dcb,_0x16eb81);}exports['command']='grid',exports['desc']=a19_0x3eeac2(0x157),exports['builder']=function(_0x5eb1aa){const _0x565dd2=a19_0x3eeac2,_0x2773c3={};_0x2773c3[_0x565dd2(0x156)]=_0x565dd2(0x142),_0x2773c3[_0x565dd2(0x173)]=_0x565dd2(0x126),_0x2773c3[_0x565dd2(0x15e)]=_0x565dd2(0x132),_0x2773c3[_0x565dd2(0x14b)]=_0x565dd2(0x123),_0x2773c3[_0x565dd2(0x127)]=_0x565dd2(0x11d);const _0x5acb9f=_0x2773c3,_0x262ccd={};_0x262ccd['description']=_0x5acb9f[_0x565dd2(0x156)],_0x262ccd[_0x565dd2(0x125)]=_0x5acb9f['sZcRr'];const _0x3c51e5={};_0x3c51e5[_0x565dd2(0x153)]=_0x5acb9f[_0x565dd2(0x15e)],_0x3c51e5['type']=_0x5acb9f[_0x565dd2(0x14b)],_0x3c51e5[_0x565dd2(0x167)]=![];const _0x5a29ba={};return _0x5a29ba[_0x565dd2(0x151)]=_0x262ccd,_0x5a29ba[_0x565dd2(0x12c)]=_0x3c51e5,_0x5eb1aa[_0x565dd2(0x144)](HELP_HEADER_MESSAGE[_0x565dd2(0x163)])[_0x565dd2(0x150)](HELP_FOOTER_MESSAGE)[_0x565dd2(0x145)](_0x5a29ba)[_0x565dd2(0x11d)](_0x5acb9f[_0x565dd2(0x127)])[_0x565dd2(0x140)];},exports[a19_0x3eeac2(0x139)]=async function(_0x1b44c3){const _0x4d38c9=a19_0x3eeac2,_0x2ff08f={'zBIZg':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','SUqIf':function(_0x22600f){return _0x22600f();},'HYqbI':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','KmpAp':function(_0x1f3b28,_0x141a5d,_0x4b2d76,_0x5b57fd,_0x1504fd,_0x5a4b17,_0x17f12d){return _0x1f3b28(_0x141a5d,_0x4b2d76,_0x5b57fd,_0x1504fd,_0x5a4b17,_0x17f12d);},'OReFg':_0x4d38c9(0x170),'iEgaV':'init-not-called','ldeLZ':function(_0x24ebfe,_0x4f272c,_0x3846da,_0x5a970c,_0x52f90b,_0x4f44ea,_0x1186f4){return _0x24ebfe(_0x4f272c,_0x3846da,_0x5a970c,_0x52f90b,_0x4f44ea,_0x1186f4);},'fZjzR':function(_0x2dc0de){return _0x2dc0de();},'MdYQS':_0x4d38c9(0x158),'KzYkq':_0x4d38c9(0x124),'LxFar':_0x4d38c9(0x135),'IbDUl':function(_0x480e73,_0x2833c3,_0x24aa1e,_0x301a11){return _0x480e73(_0x2833c3,_0x24aa1e,_0x301a11);},'IXPrU':function(_0x282c0c,_0x14f33a,_0x328baf,_0x165c86,_0x39d5b3,_0x13afdc,_0x563c0b){return _0x282c0c(_0x14f33a,_0x328baf,_0x165c86,_0x39d5b3,_0x13afdc,_0x563c0b);},'WTQSY':function(_0x5bf65b,_0x1f424e,_0x12f165){return _0x5bf65b(_0x1f424e,_0x12f165);},'aOnba':_0x4d38c9(0x13a),'FElfe':function(_0x4bc2ed,_0x9ec1f4){return _0x4bc2ed===_0x9ec1f4;},'TiHBa':_0x4d38c9(0x15f),'zPpOy':function(_0x19b675,_0x6e9618,_0x5f1692,_0x38777f,_0x24bd80,_0x459aa4,_0x28938e){return _0x19b675(_0x6e9618,_0x5f1692,_0x38777f,_0x24bd80,_0x459aa4,_0x28938e);},'IWBbh':'unauthorised','lIESS':function(_0x2bed37,_0x53e6ca){return _0x2bed37===_0x53e6ca;},'ujbwL':function(_0x44ed86,_0x13ed5c,_0x5e44ac,_0x366505,_0x1647a4,_0x3a193f,_0x1e554e){return _0x44ed86(_0x13ed5c,_0x5e44ac,_0x366505,_0x1647a4,_0x3a193f,_0x1e554e);},'rCqCQ':'invalid-grid-id','UtLae':function(_0x2b9567,_0x2a810f,_0x3201f1,_0x36ff26,_0x45accd,_0xdf6cd,_0x120744){return _0x2b9567(_0x2a810f,_0x3201f1,_0x36ff26,_0x45accd,_0xdf6cd,_0x120744);},'PFwGu':_0x4d38c9(0x11e)};let _0x3460d0;try{!_0x1b44c3[_0x4d38c9(0x16a)]&&(logger[_0x4d38c9(0x164)](_0x2ff08f[_0x4d38c9(0x174)]),process[_0x4d38c9(0x12b)](0x1));!fs['existsSync'](_0x2ff08f[_0x4d38c9(0x166)](getCredentialsPath))&&(logger['error'](_0x2ff08f[_0x4d38c9(0x12f)]),await _0x2ff08f[_0x4d38c9(0x162)](sendInstrumentationEvent,_0x1b44c3,_0x2ff08f[_0x4d38c9(0x177)],messageTypes[_0x4d38c9(0x13c)],_0x2ff08f[_0x4d38c9(0x152)],null,_0x1b44c3),process[_0x4d38c9(0x12b)](0x1));logger[_0x4d38c9(0x136)](_0x4d38c9(0x131)+_0x1b44c3[_0x4d38c9(0x16a)]),await _0x2ff08f[_0x4d38c9(0x121)](sendInstrumentationEvent,_0x1b44c3,_0x2ff08f[_0x4d38c9(0x177)],messageTypes[_0x4d38c9(0x137)],null,null,_0x1b44c3);const _0xee38ab=JSON['parse'](fs[_0x4d38c9(0x16c)](_0x2ff08f[_0x4d38c9(0x12a)](getCredentialsPath)));global_registry['bstackUsername']=_0xee38ab[_0x4d38c9(0x13f)][_0x4d38c9(0x160)],global_registry['bstackAccesskey']=_0xee38ab['Browserstack'][_0x4d38c9(0x16b)];const _0x357464=WS_ENDPOINT['replace'](_0x2ff08f[_0x4d38c9(0x147)],_0xee38ab[_0x4d38c9(0x13f)]['username'])[_0x4d38c9(0x148)](_0x2ff08f[_0x4d38c9(0x15b)],_0xee38ab['Browserstack'][_0x4d38c9(0x16b)]),_0x5b0332={};_0x5b0332[_0x4d38c9(0x15a)]=ws,_0x5b0332[_0x4d38c9(0x14e)]=0x36ee80,_0x3460d0=new ReconnectingWebSocket(_0x357464,[],_0x5b0332),logger[_0x4d38c9(0x146)](_0x2ff08f[_0x4d38c9(0x122)]),webSocketUtils['addListeners'](_0x3460d0,_0x1b44c3['user'],_0x1b44c3[_0x4d38c9(0x16b)]);const [_0x55ee7f,_0x5f1316]=await _0x2ff08f[_0x4d38c9(0x133)](getGridDetails,_0xee38ab['Browserstack']['username'],_0xee38ab[_0x4d38c9(0x13f)][_0x4d38c9(0x16b)],_0x1b44c3[_0x4d38c9(0x16a)]);if(_0x5f1316){const _0x1c331a=_0x5f1316['info'];global_registry[_0x4d38c9(0x15c)]=_0x1c331a[_0x4d38c9(0x15c)],global_registry[_0x4d38c9(0x13b)]=_0x1c331a[_0x4d38c9(0x141)],global_registry[_0x4d38c9(0x13e)]=_0x1c331a[_0x4d38c9(0x13e)];const _0x6769ec=await _0x2ff08f[_0x4d38c9(0x14f)](getCloudProviderObject,_0x1c331a['cloudProvider'],_0x1c331a[_0x4d38c9(0x13e)],_0x1c331a[_0x4d38c9(0x154)],_0x3460d0,webSocketUtils,_0x1b44c3),[_0x5684cf,_0x2f4abc,_0x83fb7a,_0x4d8078,_0x16f328,_0x4c0350]=await _0x2ff08f[_0x4d38c9(0x16d)](createK8sClient,_0x6769ec,_0x1b44c3[_0x4d38c9(0x171)]);await _0x2ff08f[_0x4d38c9(0x16d)](scaleUpHubDeployment,_0x2f4abc,_0x1c331a[_0x4d38c9(0x154)]),logger[_0x4d38c9(0x136)](_0x2ff08f[_0x4d38c9(0x175)]),process[_0x4d38c9(0x12b)](0x0);}_0x2ff08f[_0x4d38c9(0x128)](_0x55ee7f['statusCode'],0x191)&&(logger[_0x4d38c9(0x164)](_0x2ff08f[_0x4d38c9(0x11f)]),await _0x2ff08f[_0x4d38c9(0x16e)](sendInstrumentationEvent,_0x1b44c3,_0x2ff08f[_0x4d38c9(0x177)],messageTypes['ERROR'],_0x2ff08f[_0x4d38c9(0x169)],null,_0x1b44c3),process[_0x4d38c9(0x12b)](0x1)),_0x2ff08f[_0x4d38c9(0x168)](_0x55ee7f[_0x4d38c9(0x134)],0x190)&&(logger[_0x4d38c9(0x164)](JSON['parse'](_0x55ee7f[_0x4d38c9(0x155)])[_0x4d38c9(0x172)]),await _0x2ff08f[_0x4d38c9(0x16f)](sendInstrumentationEvent,_0x1b44c3,_0x2ff08f[_0x4d38c9(0x177)],messageTypes[_0x4d38c9(0x13c)],_0x2ff08f[_0x4d38c9(0x13d)],null,_0x1b44c3),process[_0x4d38c9(0x12b)](0x1)),logger[_0x4d38c9(0x164)](_0x4d38c9(0x138)+JSON[_0x4d38c9(0x179)](_0x55ee7f)),await _0x2ff08f[_0x4d38c9(0x15d)](sendInstrumentationEvent,_0x1b44c3,_0x2ff08f[_0x4d38c9(0x177)],messageTypes[_0x4d38c9(0x13c)],_0x2ff08f[_0x4d38c9(0x176)],_0x55ee7f,_0x1b44c3),process[_0x4d38c9(0x12b)](0x1);}catch(_0x2090b1){const _0x2e60d9=_0x4d38c9(0x143)+_0x2090b1+'\x20\x0a'+JSON['stringify'](_0x2090b1['stack'])+'\x20';logger[_0x4d38c9(0x164)](_0x2e60d9),process[_0x4d38c9(0x12b)](0x1);}};